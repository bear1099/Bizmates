let graphSketch=p=>{let frameRate=6,canvas,defaultHeight=200,mobWidth=screen.availWidth-32,graphCanvasSize=screen.availWidth>672?{width:640,height:200}:{width:mobWidth,height:200},lineDrawer;function createLineDrawer(numberOfBalls){let currentXCoordinatePixel=0,pace=3;const status=sirsim.getStatus(),statusColorRGB={SUSCEPTIBLE:{r:255,g:255,b:0},INFECTIOUS:{r:255,g:0,b:0},RECOVERED:{r:0,g:255,b:0},QUARANTINED:{r:128,g:128,b:128}};let prev_x=0,prev_y={SUSCEPTIBLE:sirsim.getNumberOfBalls(),INFECTIOUS:0,RECOVERED:0,QUARANTINED:0},totalBalls,height=graphCanvasSize.height,ratio=height/numberOfBalls,numberOfBallsInStatus;var lineDrawer=new Object;return lineDrawer.drawLines=statusArray=>{numberOfBallsInStatus={SUSCEPTIBLE:numberOfBalls,INFECTIOUS:0,RECOVERED:0,QUARANTINED:0},statusArray.forEach(element=>{switch(element){case status.INFECTIOUS:++numberOfBallsInStatus.INFECTIOUS,--numberOfBallsInStatus.SUSCEPTIBLE;break;case status.RECOVERED:++numberOfBallsInStatus.RECOVERED,--numberOfBallsInStatus.SUSCEPTIBLE;break;case status.QUARANTINED:++numberOfBallsInStatus.QUARANTINED,--numberOfBallsInStatus.INFECTIOUS}});for(let consideredStatus in status){p.stroke(statusColorRGB[consideredStatus].r,statusColorRGB[consideredStatus].g,statusColorRGB[consideredStatus].b);let y=numberOfBallsInStatus[consideredStatus];p.line(prev_x,Math.floor(height-ratio*prev_y[consideredStatus]),currentXCoordinatePixel,Math.floor(height-ratio*y)),prev_y[consideredStatus]=y}prev_x=currentXCoordinatePixel,0===numberOfBallsInStatus.INFECTIOUS&&p.noLoop()},lineDrawer.draw=()=>{currentXCoordinatePixel+=3,currentXCoordinatePixel==graphCanvasSize.width?p.noLoop():lineDrawer.drawLines(sirsim.getStatusArray())},lineDrawer}p.setup=()=>{canvas=p.createCanvas(graphCanvasSize.width,graphCanvasSize.height),canvas.id("graph-canvas"),canvas.parent("graph-container"),p.frameRate(6),p.reset()},p.reset=()=>{p.background(255),currentXCoordinatePixel=0,prev_x=0,prev_y={SUSCEPTIBLE:sirsim.getNumberOfBalls(),INFECTIOUS:0,RECOVERED:0,QUARANTINED:0},lineDrawer=createLineDrawer(sirsim.getNumberOfBalls()),p.strokeWeight(4),p.loop()},p.draw=()=>{lineDrawer.draw()}};